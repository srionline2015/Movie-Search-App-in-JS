<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Movie Search Appliction</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1 class="text-center mt-5">Book My Show</h1>
        <form id="movieForm" autocomplete="off">
            <div class="form-group">
                <label for="movie">Movie name</label>
                <input class="form-control" type="text" id="movie" placeholder="Search movie...">
            </div>
            <div class="form-group text-center mt-2">
                <button type="button" class="btn btn-success btn-block" onclick="searchMovies();">Search Movie</button>
            </div>
        </form>
        <div id="result"></div>
    </div>
</body>
<script>
    
	async function searchMovies()
	{
		var apikey = "ac5a571b";
		
		var searchTerm = document.getElementById('movie').value;
		
		//https://www.omdbapi.com/?apikey=ac5a571b&t=a
		var url = "http://www.omdbapi.com/?apikey=" + apikey + "&t=" + searchTerm;
		
		const response = await fetch(url, {mode: 'cors'});
		
		const data = await response.json();
		
		console.log(data);
		
		if (data) {
			const movies = data;
			
			result = document.getElementById('result');
			result.innerHTML = '';
			
			//movies.forEach(movie => {
			
				const movieElement = document.createElement('div');
				movieElement.classList.add('movie');
				
				movieElement.innerHTML = `
					<img src="${movies.Poster}" alt="${movies.Title}">
					<h2>${movies.Title}</h2>
					<p>Year: ${movies.Year}</p>
				`;
				result.appendChild(movieElement);
				
			//});
			
		} else {
			result.innerHTML = '<p>No results found</p>';
		}
	}

</script>
</html>
